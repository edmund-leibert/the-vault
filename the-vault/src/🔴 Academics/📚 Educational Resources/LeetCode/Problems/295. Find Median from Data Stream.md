---
title: 295. Find Median from Data Stream
created: 2024-01-24T16:29
updated: 2024-04-14T00:24
authors:
  - Edmund Leibert III
tags:
  - 🔴-academic/📚-educational-resource/name/leetcode/🔖/problems/295-find-median-from-data-stream
  - 🔴-academic/📚-educational-resource/format/website
  - 🔴-academic/📚-educational-resource/discipline/computer-science/
  - 🔴-academic/📚-educational-resource/name/leetcode/🏷️/problems/premium/🔓-no
  - 🔴-academic/📚-educational-resource/name/leetcode/🏷️/problems/difficulty/hard
  - 🔴-academic/📚-educational-resource/name/leetcode/🏷️/problems/tag/topic/two-pointers
  - 🔴-academic/📚-educational-resource/name/leetcode/🏷️/problems/tag/topic/design
  - 🔴-academic/📚-educational-resource/name/leetcode/🏷️/problems/tag/topic/sorting
  - 🔴-academic/📚-educational-resource/name/leetcode/🏷️/problems/tag/topic/heap-❨priority-queue❩
  - 🔴-academic/📚-educational-resource/name/leetcode/🏷️/problems/tag/topic/data-stream
  - study-note
cards-deck: 🔴 Academic::📚 Educational Resource::LeetCode::Problems::295. Find Median from Data Stream
---

# 295. Find Median from Data Stream

---

> [!INFO]+ Note
> This page contains notes pertaining to the LeetCode problem [295. Find Median from Data Stream](https://leetcode.com/problems/find-median-from-data-stream/description/). [@MedianTwoSorted]
>
> These notes are primarily structured in a Q&A format, making it easy to follow and learn. Corresponding **Anki** flashcards are available, enabling efficient revision and reinforcement of the concepts.
> 
> Performance of attempts are also recorded.

---

> [!INFO]+ Note
> **Previous Notes**:
> 

---

## :TiNotes: Description

﹇<br>
Mathematically, particularly in the realm of computer science, what is the definition of the **median** of a set of numbers?

#anki-card

In the realm of computer science and statistics, the **median** is a measure of central tendency that represents the middle value in a sorted set of numbers. [If the set of numbers is arranged in ascending or descending order, the median is the value that separates the higher half from the lower half of the data sample](https://en.wikipedia.org/wiki/Median). [@wikipediaMedianWikipedia]

The method for calculating the median depends on whether the number of data points is even or odd:

- [If the number of values (n) in the data set is **odd**, then the median is the value at the position `(n + 1)/2`](https://www.geeksforgeeks.org/mean-median-mode/) [@MeanMedianMode]
- [If the number of values (n) in the data set is **even**, then the median is the average of the values at the positions `n/2` and `(n/2) + 1`](https://www.geeksforgeeks.org/mean-median-mode/) [@geeksforgeeksMeanMedianMode

For example, if we have the data set \{1, 2, 3\}, the median is 2, as it is the middle value. [If we have the data set \{1, 2, 3, 4\}, the median is (2 + 3)/2 = 2.5, which is the average of the two middle values](https://www.geeksforgeeks.org/mean-median-mode/) [@geeksforgeeksMeanMedianMode

In computer science, the median is often used in algorithms and data structures, such as the Quickselect algorithm, which is used to find the kth smallest number in an unsorted list. [It’s also used in decision trees and machine learning for splitting data](https://www.geeksforgeeks.org/median/) [@geeksforgeeksMedianStatisticsFormula]

⌂
<br>﹈<br>^1706146290525

﹇<br>
When attempting to compute the **median** of a set of numbers, must the numbers first be sorted?

#anki-card 

Yes, to compute the **median** of a set of numbers, the numbers must first be sorted in ascending or descending order. 

The **median** is the value separating the higher half from the lower half of a data set, and this concept only makes sense once the data set is sorted. 
- If the data set is *not* sorted, it would be <u>impossible</u> to determine which values fall into the higher half and which fall into the lower half. So, sorting is a *necessary* step in computing the median of a set of numbers.

⌂
<br>﹈<br>^1706146290535


## :BoBxBookOpen: Editorial

### **Solution**

﹇<br>
In brief, what are the solutions discussed in the LeetCode Editorial for this problem? Be sure to describe the time and space complexity of each.

#anki-card 

| Approach                              | Time Complexity                | Space Complexity |
|---------------------------------------|--------------------------------|------------------|
| Approach 1: Simple Sorting            | O(n log n) + O(1) = O(n log n) | O(n)             |
| Approach 2: Insertion Sort            | O(n) + O(log n) = O(n)         | O(n)             |
| Approach 3: Two Heaps                 | O(5 * log n) + O(1) = O(log n) | O(n)             |
| Approach 4: Multiset and Two Pointers | O(log n)                       | O(n)             |

⌂
<br>﹈<br>


#### **Approach 1: Simple Sorting**

```cpp
class MedianFinder {
    vector<int> store;

public:
    // Adds a number into the data structure.
    void addNum(int num)
    {
        store.push_back(num);
    }

    // Returns the median of current data stream
    double findMedian()
    {
        sort(store.begin(), store.end());

        int n = store.size();
        return (n & 1 ? store[n / 2] : ((double) store[n / 2 - 1] + store[n / 2]) * 0.5);
    }
};
```

**Intuition**

**Algorithm**

**Complexity Analysis**

#### **Approach 2: Insertion Sort**

```cpp
class MedianFinder {
    vector<int> store; // resize-able container

public:
    // Adds a number into the data structure.
    void addNum(int num)
    {
        if (store.empty())
            store.push_back(num);
        else
            store.insert(lower_bound(store.begin(), store.end(), num), num);     // binary search and insertion combined
    }

    // Returns the median of current data stream
    double findMedian()
    {
        int n = store.size();
        return n & 1 ? store[n / 2] : ((double) store[n / 2 - 1] + store[n / 2]) * 0.5;
    }
};
```


**Intuition**

**Algorithm**

**Complexity Analysis**

```cpp
class MedianFinder {
    priority_queue<int> lo;                              // max heap
    priority_queue<int, vector<int>, greater<int>> hi;   // min heap

public:
    // Adds a number into the data structure.
    void addNum(int num)
    {
        lo.push(num);                                    // Add to max heap

        hi.push(lo.top());                               // balancing step
        lo.pop();

        if (lo.size() < hi.size()) {                     // maintain size property
            lo.push(hi.top());
            hi.pop();
        }
    }

    // Returns the median of current data stream
    double findMedian()
    {
        return lo.size() > hi.size() ? lo.top() : ((double) lo.top() + hi.top()) * 0.5;
    }
};
```

#### **Approach 3: Two Heaps**

**Intuition**

**Algorithm**

**Complexity Analysis**

```cpp
class MedianFinder {
    priority_queue<int> lo;                              // max heap
    priority_queue<int, vector<int>, greater<int>> hi;   // min heap

public:
    // Adds a number into the data structure.
    void addNum(int num)
    {
        lo.push(num);                                    // Add to max heap

        hi.push(lo.top());                               // balancing step
        lo.pop();

        if (lo.size() < hi.size()) {                     // maintain size property
            lo.push(hi.top());
            hi.pop();
        }
    }

    // Returns the median of current data stream
    double findMedian()
    {
        return lo.size() > hi.size() ? lo.top() : ((double) lo.top() + hi.top()) * 0.5;
    }
};
```

#### **Approach 4: Multiset and Two Pointers**

**Intuition**

**Algorithm**

**Complexity Analysis**

```cpp
class MedianFinder {
    multiset<int> data;
    multiset<int>::iterator lo_median, hi_median;

public:
    MedianFinder()
        : lo_median(data.end())
        , hi_median(data.end())
    {
    }

    void addNum(int num)
    {
        const size_t n = data.size();   // store previous size

        data.insert(num);               // insert into multiset

        if (!n) {
            // no elements before, one element now
            lo_median = hi_median = data.begin();
        }
        else if (n & 1) {
            // odd size before (i.e. lo == hi), even size now (i.e. hi = lo + 1)

            if (num < *lo_median)       // num < lo
                lo_median--;
            else                        // num >= hi
                hi_median++;            // insertion at end of equal range
        }
        else {
            // even size before (i.e. hi = lo + 1), odd size now (i.e. lo == hi)

            if (num > *lo_median && num < *hi_median) {
                lo_median++;                    // num in between lo and hi
                hi_median--;
            }
            else if (num >= *hi_median)         // num inserted after hi
                lo_median++;
            else                                // num <= lo < hi
                lo_median = --hi_median;        // insertion at end of equal range spoils lo
        }
    }

    double findMedian()
    {
        return ((double) *lo_median + *hi_median) * 0.5;
    }
};
```

#### **Further thoughts**

- **Buckets**
- **Reservoir Sampling**
- **Segment Trees**
- **Order Statistic Trees**

## :RiFlaskLine: Solutions

## :RiHistoryLine: Submissions

### :SiCplusplus: C++

#### **Attempt #1** • 📆 2024-01-28 17:03 -08:00 • ❌ Failed • ⏱️ PT2H • \[Author(s): Edmund Leibert III\]

---

## :EiZoteroItem: Bibliography

\[1\] “4. Median of Two Sorted Arrays,” _LeetCode_. Available: [https://leetcode.com/problems/median-of-two-sorted-arrays/description](https://leetcode.com/problems/median-of-two-sorted-arrays/description). [Accessed: Jan. 24, 2024]

\[1\] 
GeeksforGeeks, “Median in Statistics: Formula, How to Find, Examples, and FAQs,” _GeeksforGeeks_. Available: https://www.geeksforgeeks.org/median/

\[2\] 
GeeksforGeeks, “Mean, Median and Mode - Definition, Formulas, and Solved Examples,” _GeeksforGeeks_. Available: https://www.geeksforgeeks.org/mean-median-mode/

\[3\] 
Wikipedia, “Median - Wikipedia,” _Wikipedia_. Available: https://en.wikipedia.org/wiki/Median

\[4\] 
“4. Median of Two Sorted Arrays,” _LeetCode_. Available: https://leetcode.com/problems/median-of-two-sorted-arrays/description

\[5\] 
TutorialCup, “Median of Two Sorted Arrays LeetCode Solution,” _TutorialCup_, Dec. 29, 2021. Available: https://tutorialcup.com/leetcode-solutions/median-of-two-sorted-arrays-leetcode-solution.htm

---

> [!INFO]+ Note
> **Next Note(s)**:
> 

---
